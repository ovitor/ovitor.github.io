<!DOCTYPE html>
<html lang="en">
<head>
          <title>blog - kubernetes with kind</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
        <link rel="stylesheet" href="//cdn.materialdesignicons.com/4.5.95/css/materialdesignicons.min.css">
        <link href="https://fonts.googleapis.com/css?family=Lato|Merriweather&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://ovitor.github.io/theme/css/simple.css">
        <meta charset="utf-8" />
        <link href="https://ovitor.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="blog Full Atom Feed" />
        <link href="https://ovitor.github.io/feeds/system-administration.atom.xml" type="application/atom+xml" rel="alternate" title="blog Categories Atom Feed" />




    <meta name="tags" content="kubernetes" />
    <meta name="tags" content="docker" />

</head>

<body id="index" class="home">
  <section class="section">
    <div class="container">
      <div class="columns">

        <div class="column is-2">
          <!-- menu hidden 
          <nav id="menu" class="navbar">
            <div class="navbar-menu">


                    <a class=" navbar-item" href="https://ovitor.github.io/category/development.html">development</a>
                    <a class="active navbar-item" href="https://ovitor.github.io/category/system-administration.html">system administration</a>
            </div> 
          </nav>
          menu hidden -->

          <header id="banner" class="body">
            <h1 class="title has-text-centered" style="margin-bottom:20px;">
              <a href="https://ovitor.github.io/">blog</a>
              <br />
              <small></small>
            </h1>
          </header><!-- /#banner -->

         <div class="field is-grouped is-grouped-centered">
          <p class="control">
            <a class="button is-light is-medium" href="https://github.com/ovitor" target="_blank" title="blog authors GitHub page">
              <span class="icon is-medium">
                <i class="mdi mdi-github-circle" aria-hidden="true"></i>
              </span>
            </a>
          </p>
        </div> 

        </div> <!-- column -->

        <div class="column is-three-quarters">
  <div class="box is-shadowless is-paddingless">
    <article class="media">
      <div class="media-content">
        <div class="content">
          <h1 class="title">
            <a href="https://ovitor.github.io/posts/2020/05/kubernetes-with-kind/" 
               rel="bookmark" 
               title="Permalink to kubernetes with kind">
               kubernetes with kind
            </a>
          </h1>
          
          <nav class="level is-mobile">
            <div class="level-left">
              <span class="level-item" aria-label="created_at">
                <span class="icon">
                  <i class="mdi mdi-calendar" aria-hidden="true"></i>
                </span>
                <time class="published" datetime="2020-05-08T17:30:00-03:00"> Fri 08 May 2020 </time>
              </span>
              <span class="level-item" aria-label="retweet">
                <span class="icon">
                  <i class="mdi mdi-account-outline" aria-hidden="true"></i>
                </span>
                <address class="vcard author">
                    <a class="url fn" href="https://ovitor.github.io/author/vitor-carvalho.html">Vitor Carvalho</a>
                    .
                </address>
              </span>
            </div>
          </nav>
          <div class="post-content">
            <p>To those who doesn't know Kubernetes yet, it helps operational and developers
teams to keep every thing related to containerized applications up to date and
running smootly in your infrastructure with minimal manually intervention. </p>
<p>Kubernetes, at first sight may look overhelming, but, trust me, it should 
help you get the things done very quickly once you are used to it.</p>
<p>To start, you could look at several places at Internet. Look at this list:</p>
<ul>
<li><a href="https://kubernetes.io/docs/home/">Kubernetes docs</a></li>
<li><a href="https://github.com/kelseyhightower/kubernetes-the-hard-way">Kubernetes the hard way</a></li>
<li><a href="https://www.amazon.com/Kubernetes-Running-Dive-Future-Infrastructure-ebook/dp/B07YP1XSZ9/ref=pd_sbsd_14_1/137-9475426-0694937?_encoding=UTF8&amp;pd_rd_i=B07YP1XSZ9&amp;pd_rd_r=e067f55a-8432-4ec2-a567-5716a7f33e06&amp;pd_rd_w=LnVM9&amp;pd_rd_wg=W7D5v&amp;pf_rd_p=2c2d0d3b-b3c5-4110-93fa-2c1270309ac1&amp;pf_rd_r=AH49WE30Y4BM0PXJTWQP&amp;psc=1&amp;refRID=AH49WE30Y4BM0PXJTWQP">Kubernetes Up and Running - Dive into the future of infrastructure</a></li>
</ul>
<p>I start with the oficial documentation and was a great starting point, then I pass to
kubernetes the hard way and finally this awesome book listed above.</p>
<p>Almost every tutorial or even the official documentation prupose the use of
<a href="https://kubernetes.io/docs/tasks/tools/install-minikube/">minikube</a>, a tool
that creates a VM (using some hypervisor as VirtualBox) and install
kubernetes in it. It is a simple way, but too havy in my opnion. </p>
<p>The way I like to study was using <code>kind</code> or <a href="https://kind.sigs.k8s.io/">kubernetes in
docker</a>.  Who use Archlinux could install it from
AUR. At the official page, you can find instructions to install in macOS/Linux
or Windows. You must have installed in your system other tools like Docker and
kubectl (the last one isn't a dependency for kind, but you must have it to
manage the cluster created by <em>kind</em>).</p>
<h2>Starting using kind</h2>
<p>After the installation you can starting creating your kubernetes cluster.
First, create a file into your $HOME named <code>kind-config.yaml</code> that holds the
kind configuration. Like every thing in the kubernetes environment, you can
create a yaml file to hold the configs.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># four nodes (three workers) cluster config</span>
<span class="n">kind:</span> <span class="n">Cluster</span>
<span class="n">apiVersion:</span> <span class="n">kind</span>.<span class="o">x-</span><span class="n">k8s</span>.<span class="n">io</span><span class="o">/</span><span class="n">v1alpha4</span>
<span class="n">nodes:</span>
  - <span class="n">role:</span> <span class="n">control-plane</span>
  - <span class="n">role:</span> <span class="n">worker</span>
  - <span class="n">role:</span> <span class="n">worker</span>
  - <span class="n">role:</span> <span class="n">worker</span>
</code></pre></div>


<p>Then, run the following command</p>
<div class="highlight"><pre><span></span><code>$ kind create cluster --config kind-config.yaml
</code></pre></div>


<p>The file tells the kind that we want a object of the kind Cluster and we want
to use the apiVersion v1alpha4. We also specify the number of nodes that we 
want to setup in our cluster. We could also specify a image to each one of the
nodes.</p>
<p>After this, kind will download the base images from its docker hub and run the
images in your local environment. Check if the cluster is up by getting the 
nodes availables with <code>kind get nodes</code>. You must see a list of nodes created
by the kind create command.</p>
<p>Another important command it is the <code>kind get kubeconfig</code>, it outputs in the
current terminal the kubeconfig file, necessary to use the <code>kubectl</code> tool.</p>
<div class="highlight"><pre><span></span><code>$ kind get kubeconfig &gt; ~/.kube/config
</code></pre></div>


<h3>Next steps..</h3>
<p>The next step we gonna see is how to interact with the new cluster. We must use
the <code>kubectl</code> tool. This is a content to another post. </p>
          </div>
          <div class="post-info-footer">
            <hr />
            <nav class="level is-mobile">
              <div class="level-left">
                <span class="level-item" aria-label="created_at">
                  <div class="category">
                    <a href="#" onclick="event.preventDefault();history.go(-1);">
                      <span class="icon">
                        <i class="mdi mdi-chevron-left" aria-hidden="true"></i>
                      </span>
                      back
                    </a> 
                  </div>
                </span>

                <span class="level-item" aria-label="created_at">
                  <div class="category">
                    post under category:
                    <a href="https://ovitor.github.io/category/system-administration.html">system administration</a>
                  </div>
                </span>

                <span class="level-item" aria-label="updated_at">
                  <span class="icon">
                    <i class="mdi mdi-tag-outline" aria-hidden="true"></i>
                  </span>
                    <a class="url fn" href="https://ovitor.github.io/tag/kubernetes.html">kubernetes</a>
                    ,
                    <a class="url fn" href="https://ovitor.github.io/tag/docker.html">docker</a>
                    .
                </span>
              </div>
            </nav>
          </div>
      </div> <!-- content -->
      </article>
    </div>

        </div> <!-- column -->


      </div> <!-- columns -->
    </div> <!-- container -->
  </section>

  <section class="section">
    <div class="container">
      <footer id="contentinfo" class="has-text-centered">
        <address id="about" class="vcard body">
          made with <span class="icon has-text-danger"> <i class="mdi mdi-code-tags"></i></span> 
          using <a href="http://getpelican.com/">pelican</a>,
          which takes great advantage of <span class="icon"> <i class="mdi mdi-language-python"></i></span>
        </address><!-- /#about -->
      </footer><!-- /#contentinfo -->
    </div> <!-- container -->
  </section> <!--section footer -->
</body>
</html>